# go 设计模式

## 介绍

参考：https://github.com/senghoo/golang-design-pattern





## 创建型模式

### 简单工厂模式（Simple Factory） 

> 简单工厂模式(Simple Factory Pattern)：专门定义一个类（工厂类）来负责创建其他类的实例。可以根据创建方法的参数来返回不同类的实例，被创建的实例通常都具有共同的父类。
>
> 
>
> 举例：
>
> 简单工厂模式像一个代工厂，一个工厂可以生产多种产品。举个例子，一个饮料加工厂同时帮百事可乐和可口可乐生产，加工厂根据输入参数`Type`来生产不同的产品。

### 工厂方法模式（Factory Method）

> 工厂方法模式(Factory Method Pattern)又称为工厂模式，工厂父类负责定义创建产品对象的公共接口，而工厂子类则负责生成具体的产品对象，即通过不同的工厂子类来创建不同的产品对象。
>
> 
>
> 举例：
>
> 工厂方法和简单工厂有一些区别，简单工厂是由一个代工厂生产不同的产品，而工厂方法是对工厂进行抽象化，不同产品都由专门的具体工厂来生产。可口可乐工厂专门生产可口可乐，百事可乐工厂专门生产百事可乐。

### 抽象工厂模式（Abstract Factory）

> 抽象工厂模式(Abstract Factory Pattern)：提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。
>
> 
>
> 举例：
>
> 抽象工厂模式用于生成产品族的工厂，所生成的对象是有关联的。
> 如果抽象工厂退化成生成的对象无关联则成为工厂函数模式。
> 比如本例子中使用RDB和XML存储订单信息，抽象工厂分别能生成相关的主订单信息和订单详情信息。
> 如果业务逻辑中需要替换使用的时候只需要改动工厂函数相关的类就能替换使用不同的存储方式了。

### 单例模式（Singleton）

> 单例模式(Singleton Pattern)：单例模式确保某一个类只有一个实例，并提供一个访问它的全局访问点。
>
> 

## 结构型模式

### 适配器模式（Adapter）

> 该模式的主要优点如下。
>
> - 客户端通过适配器可以透明地调用目标接口。
> - 复用了现存的类，程序员不需要修改原有代码而重用现有的适配者类。
> - 将目标类和适配者类解耦，解决了目标类和适配者类接口不一致的问题。
> - 在很多业务场景中符合开闭原则。
>
> 举例：
>
> 适配器模式顾名思义，比如内地用像港版插头需要一个转接头。再比如iPhone的手机卡是特别小的 Nano 卡，把 Nano 卡拿到其他手机上不能贴合卡槽尺寸，所以我们需要加一个符合卡槽尺寸的卡套。
>
> 
>
> 其缺点是：
>
> - 适配器编写过程需要结合业务场景全面考虑，可能会增加系统的复杂性。
> - 增加代码阅读难度，降低代码可读性，过多使用适配器会使系统代码变得凌乱。



### 桥接模式（Bridge）

> 桥接模式分离抽象部分和实现部分。使得两部分独立扩展。
>
> 桥接模式类似于策略模式，区别在于策略模式封装一系列算法使得算法可以互相替换。
>
> 策略模式使抽象部分和实现部分分离，可以独立变化。
>
> 举例：
>
> 尽管手机都有各自的不同之处，但是他们都有一个手机卡卡槽，卡槽里可以插不同运营商的卡。不管手机和卡内部如何改变，只要卡槽的行业标准没有变，就都可以正常使用。桥接模式在于将复杂的类进行分割，优先对象组合的方式，就像将手机里的手机卡抽离出去新建一个类，实现手机实例持有一个手机卡实例的组合方式。而不是通过继承来新建多个不同手机卡的手机子类。

### 装饰模式（Decorator）

> 装饰（Decorator）模式的定义：指在不改变现有对象结构的情况下，动态地给该对象增加一些职责（即增加其额外功能）的模式，它属于对象结构型模式。
>
> 装饰（Decorator）模式的主要优点有：
>
> - 装饰器是继承的有力补充，比继承灵活，在不改变原有对象的情况下，动态的给一个对象扩展功能，即插即用
> - 通过使用不用装饰类及这些装饰类的排列组合，可以实现不同效果
> - 装饰器模式完全遵守开闭原则
>
> 其主要缺点是：装饰模式会增加许多子类，过度使用会增加程序得复杂性。



## 行为型模式

### 策略模式（Strategy）

> 策略模式(Strategy Pattern)：定义一系列算法类，将每一个算法封装起来，并让它们可以相互替换，策略模式让算法独立于使用它的客户而变化，也称为政策模式(Policy)。策略模式是一种对象行为型模式。
>
> 举例：
>
> 使用策略模式时，我们可以定义一些策略类，每一个策略类中封装一种具体的算法。在这里，每一个封装算法的类我们都可以称之为一种策略，根据传入不同的策略类，使环境类执行不同策略类中的算法。
>
> 生活中也有很多类似的例子，就比如说商城的会员卡机制。我们去商城购物可以通过持有的会员卡打折，购买同一件商品时，持有不同等级的会员卡，能得到不同力度的折扣。下面的例子中我列举了青铜、白银、黄金三种 Vip 会员卡，传入不同的会员卡最终需要支付的金额也会有所不同。